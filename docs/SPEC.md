# アプリケーション仕様書

## 1. 概要

### 1.1 アプリ名
[アプリ名]

### 1.2 コンセプト
[アプリの概要・目的を記載]

### 1.3 ターゲットユーザー
- [ターゲット1]
- [ターゲット2]

---

## 2. 機能要件

### 2.1 コア機能
| 機能名 | 説明 | 優先度 |
|-------|------|--------|
| 機能A | [説明] | 高 |
| 機能B | [説明] | 中 |

### 2.2 サブ機能
| 機能名 | 説明 | 優先度 |
|-------|------|--------|
| 設定管理 | ユーザー設定の保存・読み込み | 高 |
| 履歴表示 | 過去のデータ一覧表示 | 中 |

---

## 3. 画面構成

### 3.1 画面一覧
| 画面名 | パス | 説明 |
|-------|------|------|
| ホーム | /(tabs)/index | メイン画面 |
| 履歴 | /(tabs)/history | 履歴一覧画面 |
| 設定 | /(tabs)/settings | 設定画面 |

### 3.2 画面詳細

#### ホーム画面
- [画面の主要機能を記載]
- [UI要素を記載]

#### 履歴画面
- [画面の主要機能を記載]
- [UI要素を記載]

#### 設定画面
- アカウント情報表示
- ログアウト機能
- [アプリ固有の設定項目]
- 利用規約/プライバシーポリシーリンク

---

## 4. データ構造

### 4.1 Supabaseテーブル

#### users テーブル（自動作成）
Supabase Authで自動管理

#### user_settings テーブル
| カラム名 | 型 | 説明 |
|---------|---|------|
| user_id | uuid | ユーザーID（PK） |
| sound_volume | integer | 音量設定 |
| vibration_enabled | boolean | 振動設定 |
| created_at | timestamptz | 作成日時 |
| updated_at | timestamptz | 更新日時 |

#### [アプリ固有テーブル]
| カラム名 | 型 | 説明 |
|---------|---|------|
| id | uuid | ID（PK） |
| user_id | uuid | ユーザーID（FK） |
| ... | ... | ... |

### 4.2 RLS（Row Level Security）ポリシー
全テーブルでRLSを有効化し、ユーザーは自分のデータのみアクセス可能。

```sql
-- 例: user_settings
ALTER TABLE user_settings ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view own settings"
ON user_settings FOR SELECT
USING (auth.uid() = user_id);

CREATE POLICY "Users can update own settings"
ON user_settings FOR UPDATE
USING (auth.uid() = user_id);
```

---

## 5. 認証

### 5.1 認証フロー
1. アプリ起動時に匿名認証を自動実行
2. ユーザーは任意でメール/パスワード認証でアカウント作成可能
3. アカウント作成後はデータが引き継がれる

### 5.2 認証方式
- 匿名認証（デフォルト）
- メール/パスワード認証（オプション）

---

## 6. 広告

### 6.1 広告タイプ
| タイプ | 配置場所 | 表示タイミング |
|-------|---------|--------------|
| バナー広告 | 画面下部 | 常時表示 |
| リワード広告 | - | ユーザーアクション時 |

### 6.2 AdMob設定
- 開発時: テスト広告ID使用（自動切り替え）
- 本番時: 実際の広告ユニットID使用

---

## 7. 技術仕様

### 7.1 技術スタック
| カテゴリ | 技術 |
|---------|------|
| フレームワーク | Expo Router |
| スタイリング | NativeWind v4 |
| 言語 | TypeScript |
| バックエンド | Supabase |
| 状態管理 | React Query |
| 広告 | Google AdMob |

### 7.2 対応プラットフォーム
- iOS 13.0以上
- Android 6.0（API 23）以上

---

## 8. 非機能要件

### 8.1 パフォーマンス
- アプリ起動: 3秒以内
- 画面遷移: 300ms以内
- アニメーション: 60FPS維持

### 8.2 セキュリティ
- 全通信はHTTPS
- RLSによるデータアクセス制御
- 環境変数で機密情報管理

---

## 更新履歴
| 日付 | 内容 |
|------|------|
| YYYY-MM-DD | 初版作成 |
